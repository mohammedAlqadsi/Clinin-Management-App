<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ูุฑูุฒ ุฏ/ ุฌููู ุงูุฎุงูุฏู</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="login-page">
        <div class="login-container">
            <span class="login-icon"></span>
            <form id="login-form">
                <label for="username">ูุฑูุฒ ุฏ/ ุฌููู ุงูุฎุงูุฏู :</label>
                <input type="text" id="username" placeholder="ุงุฏุฎู ุงุณู ุงููุณุชุฎุฏู" required><br>

                <label for="password">ูููุฉ ุงููุฑูุฑ:</label>
                <input type="password" id="password" placeholder="ุงุฏุฎู ูููุฉ ุงููุฑูุฑ" required><br>

                <button type="submit">ุฏุฎูู ุงููุธุงู</button>
                <p id="login-error" class="error-message" style="display:none;"></p>
            </form>
        </div>
    </div>
    <div id="main-system" style="display:none;">
        <header>
            <h1>ูุฑูุฒ ุฏ/ ุฌููู ุงูุฎุงูุฏู</h1>
            <nav>
                <div class="settings-dropdown">
                    <button class="settings-btn" onclick="toggleDropdown()">
                        <span class="settings-icon"></span>
                    </button>
                    <div id="settings-menu" class="dropdown-content">
                        <a href="#" onclick="showSection('archive-review'); toggleDropdown();"><b>ูุฑุงุฌุนุฉ ุงูุฃุฑุดูู</b></a>
                        <a href="#" onclick="showSection('lab-management'); toggleDropdown()"><b>ุฅุฏุงุฑุฉ ูุญูุตุงุช
                                ุงููุฎุชุจุฑ</b></a>
                        <a href="#" onclick="openModal('price-edit-modal'); toggleDropdown()"><b>ุชุนุฏูู ุฃุณุนุงุฑ
                                ุงูุฎุฏูุงุช</b></a>
                        <a href="#" onclick="openModal('password-modal'); toggleDropdown()"><b>ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</b></a>
                        <a href="#" onclick="logout()"><b>ุชุณุฌูู ุงูุฎุฑูุฌ</b></a>
                    </div>
                </div>
                <button onclick="showSection('registration')"><b>ุชุณุฌูู ูุฑูุถ ุฌุฏูุฏ</b></button>
                <button onclick="showSection('patient-list')"><b>ูุงุฆูุฉ ุงููุฑุถู</b></button>
                <button onclick="showSection('billing')"><b>ุงูููุงุชูุฑ</b></button>
                <button onclick="showSection('daily-report')"><b>ุงูุชูุฑูุฑ ุงููููู</b></button>
                <button onclick="showSection('expenses-management')"><b>ุฅุฏุงุฑุฉ ุงููุตุฑููุงุช</b> </button>

                <button onclick="archiveAndClearPatients()"><b>ุฃุฑุดูุฉ ูุญุฐู ูุฑุถู ุงูููู</b></button>
            </nav>
        </header>

        <main>
            <section id="registration" class="active">
                <h2>ุชุณุฌูู ูุฑูุถ ุฌุฏูุฏ</h2>
                <form id="patient-form">
                    <label for="p-name">ุงูุงุณู:</label>
                    <input type="text" id="p-name" required><br>

                    <label for="p-age">ุงูุนูุฑ:</label>
                    <input type="number" id="p-age" required><br>

                    <label for="p-contact">ุฑูู ุงูุชูุงุตู:</label>
                    <input type="text" id="p-contact"><br>

                    <button type="submit">ุชุณุฌูู</button>
                </form>
            </section>

            <section id="patient-list" style="display:none;">
                <h2>ูุงุฆูุฉ ุงููุฑุถู ูุงูุฎุฏูุงุช</h2>
                <table id="patients-table">
                    <thead>
                        <tr>
                            <th>ุงูุฑูู</th>
                            <th>ุงูุงุณู</th>
                            <th>ุงูุนูุฑ</th>
                            <th>ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </section>

            <section id="billing" style="display:none;">
                <h2> ุณุฏุงุฏ ุงููุงุชูุฑุฉ</h2>
                <select id="invoice-patient-select" style="font-size: 1.2em;">
                    <option value="">ุฅุฎุชุฑ ุงููุฑูุถ</option>
                </select>
                <div id="invoice-details" style="font-size: 1em;">

                </div>
            </section>

            <section id="lab-management" style="display:none;">
                <h2>ุฅุฏุงุฑุฉ ุฃุณุนุงุฑ ูุญูุตุงุช ุงููุฎุชุจุฑุงุช</h2>
                <button onclick="openLabModal('add')"><b>ุฅุถุงูุฉ ูุญุต ุฌุฏูุฏ</b></button>

                <table id="lab-tests-table">
                    <thead>
                        <tr>
                            <th>ุงุณู ุงููุญุต</th>
                            <th>ุงูุณุนุฑ (ุฑูุงู)</th>
                            <th>ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </section>
            <section id="daily-report" style="display: none;">
                <h2>๐ ุงูุชูุฑูุฑ ุงููุงูู ูุงูุชุดุบููู ููููู: <span id="report-date"></span></h2>
                <hr>

                <h3>ููุฎุต ุงูุฅูุฑุงุฏุงุช ุงูููููุฉ</h3>
                <div class="table-container">
                    <table id="revenue-summary-table">
                        <thead>
                            <tr>
                                <th>ุงูุฎุฏูุฉ/ุงููุณู</th>
                                <th>ุนุฏุฏ ุงููุฑุงุช</th>
                                <th>ุฅุฌูุงูู ุงููุจูุบ ููุฎุฏูุฉ (ุฑูุงู)</th>
                                <th>ุณุนุฑ ุงููุญุฏุฉ</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2" style="text-align: right; font-weight: bold;">ุงูุฅุฌูุงูู ุงูููู ููุฅูุฑุงุฏุงุช:
                                </td>
                                <td id="total-daily-revenue" style="font-weight: bold; color: green;">0.00 ุฑูุงู</td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <h3 style="margin-top: 30px;">ููุฎุต ุฅูุฑุงุฏุงุช ุงููุฎุชุจุฑ ูุงููุญูุตุงุช</h3>
                <div class="table-container">
                    <table id="lab-revenue-summary-table">
                        <thead>
                            <tr>
                                <th>ุงุณู ุงููุญุต/ุงูุฎุฏูุฉ</th>
                                <th>ุนุฏุฏ ุงููุฑุงุช</th>
                                <th>ุฅุฌูุงูู ุงููุจูุบ ูููุญุต (ุฑูุงู)</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2" style="text-align: right; font-weight: bold;">ุงูุฅุฌูุงูู ุงูููู ูุฅูุฑุงุฏุงุช
                                    ุงููุฎุชุจุฑ:</td>
                                <td id="total-daily-lab-revenue" style="font-weight: bold; color: blue;">0.00 ุฑูุงู</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <div style="margin-top: 20px; padding: 15px; border: 1px solid #ccc; background-color: #f9f9f9;">
                    <h4>ุชูุณูู ุฅูุฑุงุฏุงุช ุงููุฎุชุจุฑ</h4>
                    <p><strong>ุงูุฅุฌูุงูู ุงูููู ูููุฎุชุจุฑ:</strong> <span id="lab-revenue-for-split"
                            style="font-weight: bold; color: blue;">0.00 ุฑูุงู</span></p>
                    <p><strong>ุญุตุฉ ุงูุนูุงุฏุฉ:</strong> <span id="clinic-share"
                            style="font-weight: bold; color: green;">0.00 ุฑูุงู</span></p>
                    <p><strong>ุงููุจูุบ ุงููุณุชุญู ูุตุงุญุจ ุงููุฎุชุจุฑ:</strong> <span id="lab-owner-share"
                            style="font-weight: bold; color: darkred;">0.00 ุฑูุงู</span></p>
                    <p style="font-size: 0.9em; color: #666;">ูุณุจุฉ ุงูุชูุณูู ุงูุญุงููุฉ : (30% ููุนูุงุฏุฉ / 70% ูููุฎุชุจุฑ).</p>

                    <h3 style="margin-top: 30px;">ููุฎุต ุงููุตุฑููุงุช ุงูููููุฉ</h3>
                    <div class="table-container">
                        <table id="expense-summary-table">
                            <thead>
                                <tr>
                                    <th>ุงููุณุชูู/ุงููุตู</th>
                                    <th>ุนุฏุฏ ุงูุณุญูุจุงุช</th>
                                    <th>ุฅุฌูุงูู ุงููุจูุบ ูููุณุชูู (ุฑูุงู)</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="2" style="text-align: right; font-weight: bold;">ุงูุฅุฌูุงูู ุงูููู
                                        ูููุตุฑููุงุช:</td>
                                    <td id="total-daily-expense" style="font-weight: bold; color: red;">0.00 ุฑูุงู</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <h3 style="margin-top: 30px;">ููุฎุต ุงูุฃุฏุงุก ุงูุนุงู</h3>
                    <div style="font-size: 1.1em; line-height: 2;">
                        <p><strong>ุนุฏุฏ ุงููุฑุถู ุงููุณุฌููู ุงูููู:</strong> <span id="report-patient-count">0</span> ูุฑูุถ</p>
                        <p><strong>ุตุงูู ุงูุฑุจุญ ููุฐุง ุงูููู (ุงูุฅูุฑุงุฏุงุช - ุงููุตุฑููุงุช):</strong> <span id="report-net-profit"
                                style="font-weight: bold;">0.00 ุฑูุงู</span></p>
                    </div>
            </section>
            <section id="expenses-management" style="display: none;">
                <h2>ุฅุฏุงุฑุฉ ุงููุตุฑููุงุช ุงูุดูุฑูุฉ</h2>
                <button class="action-btn" onclick="openModal('add-expense-modal')"><b>ุฅุถุงูุฉ ูุตุฑููุงุช ุฌุฏูุฏุฉ</b></button>

                <h3>ููุฎุต ุงููุตุฑููุงุช ุญุณุจ ุงููุณุชูู</h3>
                <div class="table-container">
                    <table id="expenses-table">
                        <thead>
                            <tr>
                                <th>ุงุณู ุงููุณุชูู</th>
                                <th>ุงูุฅุฌูุงูู ุงููุณุชุญู ุนููู (ุฑูุงู)</th>
                                <th>ุนุฏุฏ ุงูุณุญูุจุงุช</th>
                                <th>ุฅุฌุฑุงุก</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>

                <div style="margin-top: 20px; font-size: 1.2em;">
                    <strong>ุงูุฅุฌูุงูู ุงูููู ูููุตุฑููุงุช:</strong> <span id="total-expenses" style="color: red;">0.00
                        ุฑูุงู</span>
                </div>

                <div id="expenses-details-display">
                </div>
            </section>

            <div id="add-expense-modal" class="modal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeModal('add-expense-modal')">&times;</span>
                    <h3>ุชุณุฌูู ุฎุฑุฌูุงุช ุฌุฏูุฏุฉ</h3>
                    <form id="expense-form">
                        <input type="hidden" id="expense-id">

                        <label for="expense-amount">ุงููุจูุบ (ุฑูุงู):</label>
                        <input type="number" id="expense-amount" step="0.01" min="0" required>

                        <label for="expense-recipient">ูุณุชูู ุงููุจูุบ :</label>
                        <input type="text" id="expense-recipient" required>

                        <label for="expense-date">ุชุงุฑูุฎ ุงูุณุญุจ:</label>
                        <input type="date" id="expense-date" required>

                        <label for="expense-notes">ููุงุญุธุงุช (ุงุฎุชูุงุฑู):</label>
                        <input type="text" id="expense-notes">

                        <button type="submit">ุญูุธ</button>
                    </form>
                </div>
            </div>

            <section id="archive-review" style="display:none;">
                <h2>ุฃุฑุดูู ุงูุนูููุงุช ูุงููุฑุงุฌุนุฉ ุงูุดูุฑูุฉ</h2>
                <p>ููุง ููููู ูุฑุงุฌุนุฉ ุจูุงูุงุช ุฌููุน ุงููุฑุถู ูุงูุฎุฏูุงุช ุงููุณุฌูุฉ ูู ุงูุฃูุงู ุงูุณุงุจูุฉ.</p>

                <div class="archive-summary">
                    <h4>ููุฎุต ุงูุฃุฑุดูู:</h4>
                    <p id="archive-total-days">ุนุฏุฏ ุงูุฃูุงู ุงููุคุฑุดูุฉ: 0</p>
                    <p id="archive-total-patients">ุฅุฌูุงูู ุนุฏุฏ ุงููุฑุถู ุงููุคุฑุดููู: 0</p>
                    <p id="archive-total-revenue">ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช ุงููุคุฑุดูุฉ: 0.00 ุฑูุงู</p>
                </div>

                <hr>

                <button onclick="clearAllArchiveData()" class="delete-btn" style="background-color: #d32f2f;">ุญุฐู ูู
                    ุจูุงูุงุช ุงูุฃุฑุดูู</button>

                <h3 style="margin-top: 20px;">ุณุฌูุงุช ุงูุฃูุงู ุงููุคุฑุดูุฉ:</h3>

                <select id="archive-day-select" onchange="displayArchiveDayDetails()" style="font-size: 1em;">
                    <option value="">ุงุฎุชุฑ ููู ูููุฑุงุฌุนุฉ</option>
                </select>

                <div id="archive-details-display" style="margin-top: 15px;">
                </div>

            </section>

            <div id="service-modal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeModal('service-modal')">&times;</span>
                    <h2>ุฅุถุงูุฉ ุฎุฏูุฉ ูููุฑูุถ: <span id="modal-patient-name"></span></h2>
                    <input type="hidden" id="modal-patient-id">

                    <form id="service-form">
                        <label for="service-type">ุงุฎุชุฑ ููุน ุงูุฎุฏูุฉ:</label>
                        <select id="service-type" required onchange="toggleServiceInputs()">
                            <option value="">ุงุฎุชุฑ ุงูุฎุฏูุฉ</option>
                            <option value="examination">ูุนุงููุฉ</option>
                            <option value="nursing">ุชูุฑูุถ</option>

                            <option value="laboratory">ูุฎุชุจุฑ</option>

                            <option value="other">ุฃุฎุฑู</option>
                        </select><br>

                        <div id="lab-inputs" style="display:none;">
                            <label for="lab-test-select">ููุน ุงููุญุต:</label>
                            <select id="lab-test-select"></select>
                        </div>

                        <div id="custom-inputs" style="display:none;">
                            <label for="custom-name">ุงุณู ุงูุฎุฏูุฉ :</label>
                            <input type="text" id="custom-name">

                            <label for="custom-price">ุณุนุฑ ุงูุฎุฏูุฉ (ุฑูุงู):</label>
                            <input type="number" id="custom-price" min="1" step="0.01">
                        </div>

                        <label for="service-notes">ููุงุญุธุงุช (ุงุฎุชูุงุฑู):</label>
                        <textarea id="service-notes"></textarea><br>

                        <button type="submit">ุฅุถุงูุฉ ุงูุฎุฏูุฉ</button>
                    </form>
                </div>
            </div>

            <div id="password-modal" class="modal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeModal('password-modal')">&times;</span>
                    <h3>ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</h3>
                    <form id="password-change-form">

                        <h4 style="color: #00796b;">ูุชุบููุฑ ูููุฉ ุงููุฑูุฑุ ุฃุฏุฎู ุฅุญุฏู ุงููุนูููุชูู:</h4>

                        <label for="old-password">ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ:</label>
                        <input type="password" id="old-password"><br>

                        <h4 style="text-align: center; margin: 10px 0; color: #888;">ุฃู</h4>

                        <label for="mobile-recovery">ุฑูู ุงูุฌูุงู ุงูุณุฑู ููุงุณุชุนุงุฏุฉ:</label>
                        <input type="text" id="mobile-recovery"><br>

                        <hr>
                        <label for="new-password">ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ:</label>
                        <input type="password" id="new-password" required><br>

                        <button type="submit">ุญูุธ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</button>
                        <p id="change-error" class="error-message" style="display:none;"></p>

                        <p style="font-size: 0.8em; color: #999; margin-top: 15px;">*ุฑูู ุงูุฌูุงู ุงูุณุฑู ุงูุงูุชุฑุงุถู ูู:
                            <span style="font-weight: bold;">0501234567</span></p>
                    </form>
                </div>
            </div>

            <div id="lab-edit-modal" class="modal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeModal('lab-edit-modal')">&times;</span>
                    <h3 id="lab-modal-title">ุฅุถุงูุฉ ูุญุต ูุฎุชุจุฑ</h3>
                    <form id="lab-form">
                        <input type="hidden" id="lab-id">

                        <label for="modal-lab-name">ุงุณู ุงููุญุต:</label>
                        <input type="text" id="modal-lab-name" required><br>

                        <label for="modal-lab-price">ุงูุณุนุฑ (ุฑูุงู):</label>
                        <input type="number" id="modal-lab-price" required min="1" step="0.01"><br>

                        <button type="submit">ุญูุธ ุงููุญุต</button>
                    </form>
                </div>
            </div>
            <div id="price-edit-modal" class="modal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeModal('price-edit-modal')">&times;</span>
                    <h3>ุชุนุฏูู ุฃุณุนุงุฑ ุงูุฎุฏูุงุช ุงูุซุงุจุชุฉ</h3>
                    <form id="price-edit-form">

                        <label for="examination-price">ุณุนุฑ ุงููุนุงููุฉ (ุฑูุงู):</label>
                        <input type="number" id="examination-price" required min="1" step="0.01"><br>

                        <label for="nursing-price">ุณุนุฑ ุงูุชูุฑูุถ (ุฑูุงู):</label>
                        <input type="number" id="nursing-price" required min="1" step="0.01"><br>

                        <button type="submit">ุญูุธ ุงูุฃุณุนุงุฑ ุงูุฌุฏูุฏุฉ</button>
                    </form>
                </div>
            </div>

        </main>

        <footer>
            <p>&copy; 2025 ูุธุงู ูุฑูุฒ ุฏ/ ุฌููู ุงูุฎุงูุฏู. ุชุตููู ุจูุงุณุทุฉ ู/ ูุญูุฏ ุฌููู</p>
        </footer>
    </div>
    <script src="script.js"></script>
</body>

</html>